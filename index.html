<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wind Speed & Direction Checker</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        input, button { margin: 10px; padding: 8px; }
        .result { margin-top: 20px; padding: 10px; border: 1px solid #ccc; display: inline-block; }
    </style>
</head>
<body>
    <h1>Wind Speed & Direction Checker</h1>
    <input type="text" id="location" placeholder="Enter location">
    <button onclick="fetchWindData()">Get Wind Data</button>
    <div id="windResult" class="result" style="display: none;"></div>

    <script>
        async function fetchWindData() {
            const location = document.getElementById("location").value;
            if (!location) {
                alert("Please enter a location");
                return;
            }

            try {
                // Step 1: Get latitude and longitude
                const geoResponse = await fetch(
                    `https://geocoding-api.open-meteo.com/v1/search?name=${location}&count=1&language=en&format=json`
                );
                const geoData = await geoResponse.json();
                if (!geoData.results || geoData.results.length === 0) {
                    alert("Location not found");
                    return;
                }

                const { latitude, longitude } = geoData.results[0];

                // Step 2: Fetch wind data
                const weatherResponse = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&hourly=windspeed_10m,winddirection_10m&timezone=auto`
                );
                const weatherData = await weatherResponse.json();

                // Step 3: Get the latest wind data
                const latestIndex = weatherData.hourly.time.length - 1;
                const windSpeed = weatherData.hourly.windspeed_10m[latestIndex];
                const windDirection = weatherData.hourly.winddirection_10m[latestIndex];

                // Display results
                document.getElementById("windResult").innerHTML = 
                    `<p><strong>Wind Speed:</strong> ${windSpeed} km/h</p>
                     <p><strong>Wind Direction:</strong> ${windDirection}Â°</p>`;
                document.getElementById("windResult").style.display = "block";
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }
    </script>
</body>
</html>
